# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é (PR #9: Phase 3 bugfixes)

## –®–∞–≥ 1: –ú–µ—Ä–∂–∏–º PR

```bash
gh pr merge <–Ω–æ–º–µ—Ä> --merge
git checkout main
git pull origin main
```

## –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î

```bash
rm familylog.db
# –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –ë–î —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

## –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å vault (Obsidian)

### 3.1 –û–±–Ω–æ–≤–∏—Ç—å `_system/AGENT_CONFIG.md`
–ó–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–º –∏–∑ `vault_templates/AGENT_CONFIG.md`

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º: `attachments/photos/` –∏ `attachments/documents/` (–±—ã–ª–æ `attachments/`)
- –£—Å–∏–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ related (–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç—å –¢–û–ß–ù–û –∏–∑ –¢–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ –í–°–ï–• —è–∑—ã–∫–∞—Ö (–≤–∫–ª—é—á–∞—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- –¢–µ–≥–∏ –¥–ª—è –ª—é–¥–µ–π –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Python-–æ–º ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å–∏—Ç—å LLM

### 3.2 –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∏–Ω—Ç–µ–Ω—Ç–æ–≤
–ó–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –≤ `_system/intents/`:
- `note.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ attachments, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –æ —è–∑—ã–∫–∞—Ö
- `diary.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ attachments, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –æ —è–∑—ã–∫–∞—Ö
- `calendar.md` ‚Äî **–í–ê–ñ–ù–û**: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ people_mentioned/new_people
- `reminder.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ people_mentioned/new_people

### 3.3 –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏ –≤ vault
–í Obsidian vault —Å–æ–∑–¥–∞—Ç—å:
- `attachments/photos/` ‚Äî –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- `attachments/documents/` ‚Äî –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ê—É–¥–∏–æ—Ñ–∞–π–ª –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä `üìù –∑–∞–º–µ—Ç–∫–∞`
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª (.mp3) –ö–ê–ö –§–ê–ô–õ (–Ω–µ –∫–∞–∫ –≥–æ–ª–æ—Å–æ–≤–æ–µ)
3. `uv run run.py`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - [ ] –í –ª–æ–≥–µ: `DEBUG: –∞—É–¥–∏–æ-–¥–æ–∫—É–º–µ–Ω—Ç (audio/mpeg) ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –≤ voice pipeline`
   - [ ] –§–∞–π–ª –ù–ï –ø–æ—è–≤–∏–ª—Å—è –≤ `attachments/documents/`
   - [ ] –¢–µ–∫—Å—Ç –∞—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω –∏ –≤–∫–ª—é—á—ë–Ω –≤ –∑–∞–º–µ—Ç–∫—É
   - [ ] –ù–ï–¢ `![[attachments/documents/audio_...mp3]]` –≤ –∑–∞–º–µ—Ç–∫–µ

### –¢–µ—Å—Ç 2: –ü–æ–¥–ø–∞–ø–∫–∏ –≤–ª–æ–∂–µ–Ω–∏–π
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ + –¥–æ–∫—É–º–µ–Ω—Ç (.pdf) –≤ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
2. `uv run run.py`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - [ ] –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ `attachments/photos/`
   - [ ] –î–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –≤ `attachments/documents/`
   - [ ] –í –∑–∞–º–µ—Ç–∫–µ —Å—Å—ã–ª–∫–∏ –≤–∏–¥–∞ `![[attachments/photos/...]]` –∏ `![[attachments/documents/...]]`

### –¢–µ—Å—Ç 3: –¢–µ–≥–∏ –¥–ª—è –ª—é–¥–µ–π
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º "–í–∞—Å–∏–ª–∏–π –ò–≤–∞–Ω–æ–≤–∏—á –ü–æ–ª–µ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π"
2. `uv run run.py`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - [ ] –í frontmatter –µ—Å—Ç—å —Ç–µ–≥ `–í_–ò_–ü–æ–ª–µ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π`
   - [ ] –¢–µ–≥ –¥–æ–±–∞–≤–ª–µ–Ω –≤ TAGS_GLOSSARY.md

### –¢–µ—Å—Ç 4: –ö–∞–ª–µ–Ω–¥–∞—Ä—å + new_people
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä `üìÖ –∫–∞–ª–µ–Ω–¥–∞—Ä—å`
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å: "–í—Å—Ç—Ä–µ—á–∞ —Å –ò–≤–∞–Ω–æ–º –ü–µ—Ç—Ä–æ–≤–∏—á–µ–º –ù–æ–≤–∏–∫–æ–≤—ã–º –≤ 15:00"
3. `uv run run.py`
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - [ ] –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á –ù–æ–≤–∏–∫–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω –≤ FAMILY_MEMORY.md
   - [ ] –í –∫–∞–ª–µ–Ω–¥–∞—Ä–µ —É–∫–∞–∑–∞–Ω–æ —Å–æ–±—ã—Ç–∏–µ —Å –¥–∞—Ç–æ–π

### –¢–µ—Å—Ç 5: Related notes (debug)
1. –°–æ–∑–¥–∞—Ç—å 3+ –∑–∞–º–µ—Ç–∫–∏ —Å –æ–±—â–∏–º–∏ —Ç–µ–≥–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å–µ –ø—Ä–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É)
2. `uv run run.py`
3. –°–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–µ —Å—Ç—Ä–æ–∫–∏ `[related]`:
   - [ ] `[related] –ü–∞–ø–∫–∞ notes/: –Ω–∞–π–¥–µ–Ω–æ N —Ñ–∞–π–ª–æ–≤`
   - [ ] `[related] filepath: —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ N (—Ç–µ–≥–∏)`
   - [ ] –ï—Å–ª–∏ related –Ω–∞–π–¥–µ–Ω—ã ‚Üí `–°–≤—è–∑–∞–Ω–æ —Å: [...]`
   - [ ] –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–µ–≥–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏

### –¢–µ—Å—Ç 6: –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É —Å —Ç–µ–∫—Å—Ç–æ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º –ò –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
2. `uv run run.py`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - [ ] –í –∑–∞–º–µ—Ç–∫–µ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ –û–ë–û–ò–• —è–∑—ã–∫–∞—Ö
   - [ ] –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç –ù–ï –ø–æ—Ç–µ—Ä—è–Ω

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ —ç—Ç–æ–º PR

### –ë–∞–≥-—Ñ–∏–∫—Å—ã
1. **–ê—É–¥–∏–æ—Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç—ã** ‚Äî —Ñ–∞–π–ª—ã —Å MIME `audio/*` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ STT pipeline
2. **–í–ª–æ–∂–µ–Ω–∏—è –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö** ‚Äî `attachments/photos/` –∏ `attachments/documents/` –≤–º–µ—Å—Ç–æ –ø–ª–æ—Å–∫–æ–π `attachments/`
3. **–¢–µ–≥–∏ –¥–ª—è –ª—é–¥–µ–π** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ `people_mentioned` –∏ `new_people` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `#–í_–ò_–ü–æ–ª–µ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π`
4. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å + new_people** ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —à–∞–±–ª–æ–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Ç–µ–ø–µ—Ä—å LLM –∑–Ω–∞–µ—Ç —á—Ç–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–≤—ã—Ö –ª—é–¥–µ–π
5. **Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ related** ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –ª–æ–≥ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–æ–∏—Å–∫–∞ related notes
6. **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** ‚Äî —É—Å–∏–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ LLM —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Related notes –ø—É—Å—Ç—ã
–°–º–æ—Ç—Ä–∏—Ç–µ debug-–ª–æ–≥ `[related]`. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –ú–∞–ª–æ —Ñ–∞–π–ª–æ–≤ –≤ vault ‚Äî –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2 —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–º–∏—Å—è —Ç–µ–≥–∞–º–∏
- –¢–µ–≥–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–∑–Ω—ã–µ ‚Äî LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–º–µ—Ç–∫–∏
- –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –æ–±—â–∏–µ —Ç–µ–≥–∏ –≤ TAGS_GLOSSARY.md —á—Ç–æ–±—ã LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

### –ê—É–¥–∏–æ—Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ ffmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- ffmpeg –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç MP3/OGG/WAV/M4A ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WAV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è
